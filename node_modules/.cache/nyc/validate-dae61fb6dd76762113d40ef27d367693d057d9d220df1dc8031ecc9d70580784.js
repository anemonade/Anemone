function cov_1kcefrenao(){var path="C:\\Users\\Ronald\\Desktop\\UNSW\\Y2T1\\SENG2021\\Anemone\\src\\main\\server\\validate.js";var hash="ad7ec2adb3aab6c78f3ab853fd2ef4ffaf28570d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Ronald\\Desktop\\UNSW\\Y2T1\\SENG2021\\Anemone\\src\\main\\server\\validate.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:36}},"1":{start:{line:2,column:19},end:{line:2,column:45}},"2":{start:{line:8,column:21},end:{line:8,column:55}},"3":{start:{line:10,column:4},end:{line:28,column:5}},"4":{start:{line:11,column:8},end:{line:13,column:10}},"5":{start:{line:15,column:24},end:{line:18,column:23}},"6":{start:{line:19,column:8},end:{line:27,column:9}},"7":{start:{line:20,column:12},end:{line:22,column:14}},"8":{start:{line:24,column:12},end:{line:26,column:14}},"9":{start:{line:31,column:0},end:{line:31,column:38}}},fnMap:{"0":{name:"invoiceValidation",decl:{start:{line:6,column:15},end:{line:6,column:32}},loc:{start:{line:6,column:39},end:{line:29,column:1}},line:6}},branchMap:{"0":{loc:{start:{line:10,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:28,column:5}},{start:{line:10,column:4},end:{line:28,column:5}}],line:10},"1":{loc:{start:{line:19,column:8},end:{line:27,column:9}},type:"if",locations:[{start:{line:19,column:8},end:{line:27,column:9}},{start:{line:19,column:8},end:{line:27,column:9}}],line:19}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},f:{"0":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ad7ec2adb3aab6c78f3ab853fd2ef4ffaf28570d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1kcefrenao=function(){return actualCoverage;};}return actualCoverage;}cov_1kcefrenao();const request=(cov_1kcefrenao().s[0]++,require("supertest"));const validation=(cov_1kcefrenao().s[1]++,"https://sandc.vercel.app");// Helper function for invoice validation
// Parameter file must be a string, and a string only
async function invoiceValidation(file){cov_1kcefrenao().f[0]++;// Check their server is online
const response=(cov_1kcefrenao().s[2]++,await request(validation).get("/"));cov_1kcefrenao().s[3]++;if(response.status!==200){cov_1kcefrenao().b[0][0]++;cov_1kcefrenao().s[4]++;return{status:"offline"};}else{cov_1kcefrenao().b[0][1]++;const invoice=(cov_1kcefrenao().s[5]++,await request(validation).post("/validate").set("Content-Type","application/xml").send(file));cov_1kcefrenao().s[6]++;if(invoice.status!==200){cov_1kcefrenao().b[1][0]++;cov_1kcefrenao().s[7]++;return{status:"invalid"};}else{cov_1kcefrenao().b[1][1]++;cov_1kcefrenao().s[8]++;return{status:"valid"};}}}cov_1kcefrenao().s[9]++;module.exports={invoiceValidation};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWtjZWZyZW5hbyIsImFjdHVhbENvdmVyYWdlIiwicmVxdWVzdCIsInMiLCJyZXF1aXJlIiwidmFsaWRhdGlvbiIsImludm9pY2VWYWxpZGF0aW9uIiwiZmlsZSIsImYiLCJyZXNwb25zZSIsImdldCIsInN0YXR1cyIsImIiLCJpbnZvaWNlIiwicG9zdCIsInNldCIsInNlbmQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidmFsaWRhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVxdWVzdCA9IHJlcXVpcmUoXCJzdXBlcnRlc3RcIik7XHJcbmNvbnN0IHZhbGlkYXRpb24gPSBcImh0dHBzOi8vc2FuZGMudmVyY2VsLmFwcFwiO1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIGZvciBpbnZvaWNlIHZhbGlkYXRpb25cclxuLy8gUGFyYW1ldGVyIGZpbGUgbXVzdCBiZSBhIHN0cmluZywgYW5kIGEgc3RyaW5nIG9ubHlcclxuYXN5bmMgZnVuY3Rpb24gaW52b2ljZVZhbGlkYXRpb24oZmlsZSkge1xyXG4gICAgLy8gQ2hlY2sgdGhlaXIgc2VydmVyIGlzIG9ubGluZVxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KHZhbGlkYXRpb24pLmdldChcIi9cIik7XHJcblxyXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwICkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN0YXR1czogXCJvZmZsaW5lXCJcclxuICAgICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBpbnZvaWNlID0gYXdhaXQgcmVxdWVzdCh2YWxpZGF0aW9uKVxyXG4gICAgICAgICAgICAucG9zdChcIi92YWxpZGF0ZVwiKVxyXG4gICAgICAgICAgICAuc2V0KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24veG1sXCIpXHJcbiAgICAgICAgICAgIC5zZW5kKGZpbGUpXHJcbiAgICAgICAgaWYgKGludm9pY2Uuc3RhdHVzICE9PSAyMDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN0YXR1czogXCJpbnZhbGlkXCJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBcInZhbGlkXCJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0geyBpbnZvaWNlVmFsaWRhdGlvbiB9Il0sIm1hcHBpbmdzIjoicXlEQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWZaLEtBQU0sQ0FBQUUsT0FBTyxFQUFBRixjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQyxFQUNwQyxLQUFNLENBQUFDLFVBQVUsRUFBQUwsY0FBQSxHQUFBRyxDQUFBLE1BQUcsMEJBQTBCLEVBRTdDO0FBQ0E7QUFDQSxjQUFlLENBQUFHLGlCQUFpQkEsQ0FBQ0MsSUFBSSxDQUFFLENBQUFQLGNBQUEsR0FBQVEsQ0FBQSxNQUNuQztBQUNBLEtBQU0sQ0FBQUMsUUFBUSxFQUFBVCxjQUFBLEdBQUFHLENBQUEsTUFBRyxLQUFNLENBQUFELE9BQU8sQ0FBQ0csVUFBVSxDQUFDLENBQUNLLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBQ1YsY0FBQSxHQUFBRyxDQUFBLE1BRXBELEdBQUlNLFFBQVEsQ0FBQ0UsTUFBTSxHQUFLLEdBQUcsQ0FBRyxDQUFBWCxjQUFBLEdBQUFZLENBQUEsU0FBQVosY0FBQSxHQUFBRyxDQUFBLE1BQzFCLE1BQU8sQ0FDSFEsTUFBTSxDQUFFLFNBQ1osQ0FBQyxDQUNMLENBQUMsSUFBTSxDQUFBWCxjQUFBLEdBQUFZLENBQUEsU0FDSCxLQUFNLENBQUFDLE9BQU8sRUFBQWIsY0FBQSxHQUFBRyxDQUFBLE1BQUcsS0FBTSxDQUFBRCxPQUFPLENBQUNHLFVBQVUsQ0FBQyxDQUNwQ1MsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUNqQkMsR0FBRyxDQUFDLGNBQWMsQ0FBRSxpQkFBaUIsQ0FBQyxDQUN0Q0MsSUFBSSxDQUFDVCxJQUFJLENBQUMsRUFBQVAsY0FBQSxHQUFBRyxDQUFBLE1BQ2YsR0FBSVUsT0FBTyxDQUFDRixNQUFNLEdBQUssR0FBRyxDQUFFLENBQUFYLGNBQUEsR0FBQVksQ0FBQSxTQUFBWixjQUFBLEdBQUFHLENBQUEsTUFDeEIsTUFBTyxDQUNIUSxNQUFNLENBQUUsU0FDWixDQUFDLENBQ0wsQ0FBQyxJQUFNLENBQUFYLGNBQUEsR0FBQVksQ0FBQSxTQUFBWixjQUFBLEdBQUFHLENBQUEsTUFDSCxNQUFPLENBQ0hRLE1BQU0sQ0FBRSxPQUNaLENBQUMsQ0FDTCxDQUNKLENBQ0osQ0FBQ1gsY0FBQSxHQUFBRyxDQUFBLE1BRURjLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHLENBQUVaLGlCQUFrQixDQUFDIiwiaWdub3JlTGlzdCI6W119