function cov_11c5mfj1kr(){var path="C:\\Users\\Ronald\\Desktop\\UNSW\\Y2T1\\SENG2021\\Anemone\\src\\main\\server\\trash.js";var hash="18f15156c6876600ac31058c818d801767df6572";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Ronald\\Desktop\\UNSW\\Y2T1\\SENG2021\\Anemone\\src\\main\\server\\trash.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:35}},"1":{start:{line:2,column:13},end:{line:2,column:33}},"2":{start:{line:5,column:28},end:{line:5,column:52}},"3":{start:{line:6,column:4},end:{line:14,column:5}},"4":{start:{line:7,column:8},end:{line:13,column:10}},"5":{start:{line:16,column:21},end:{line:16,column:41}},"6":{start:{line:20,column:19},end:{line:20,column:89}},"7":{start:{line:20,column:46},end:{line:20,column:88}},"8":{start:{line:22,column:4},end:{line:30,column:5}},"9":{start:{line:23,column:8},end:{line:29,column:10}},"10":{start:{line:32,column:4},end:{line:38,column:6}},"11":{start:{line:40,column:4},end:{line:45,column:7}},"12":{start:{line:42,column:35},end:{line:42,column:38}},"13":{start:{line:43,column:8},end:{line:43,column:25}},"14":{start:{line:44,column:8},end:{line:44,column:20}},"15":{start:{line:47,column:4},end:{line:53,column:6}},"16":{start:{line:56,column:0},end:{line:56,column:36}}},fnMap:{"0":{name:"listTrashItems",decl:{start:{line:4,column:9},end:{line:4,column:23}},loc:{start:{line:4,column:31},end:{line:54,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:20,column:35},end:{line:20,column:36}},loc:{start:{line:20,column:46},end:{line:20,column:88}},line:20},"2":{name:"(anonymous_2)",decl:{start:{line:40,column:28},end:{line:40,column:29}},loc:{start:{line:40,column:35},end:{line:45,column:5}},line:40}},branchMap:{"0":{loc:{start:{line:6,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:14,column:5}},{start:{line:6,column:4},end:{line:14,column:5}}],line:6},"1":{loc:{start:{line:22,column:4},end:{line:30,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:30,column:5}},{start:{line:22,column:4},end:{line:30,column:5}}],line:22}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"18f15156c6876600ac31058c818d801767df6572"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_11c5mfj1kr=function(){return actualCoverage;};}return actualCoverage;}cov_11c5mfj1kr();const other=(cov_11c5mfj1kr().s[0]++,require("./other.js"));const auth=(cov_11c5mfj1kr().s[1]++,require("./auth.js"));function listTrashItems(token){cov_11c5mfj1kr().f[0]++;const tokenValidation=(cov_11c5mfj1kr().s[2]++,auth.tokenIsValid(token));cov_11c5mfj1kr().s[3]++;if(!tokenValidation.valid){cov_11c5mfj1kr().b[0][0]++;cov_11c5mfj1kr().s[4]++;return{code:401,ret:{success:false,error:"Token is empty or invalid"}};}else{cov_11c5mfj1kr().b[0][1]++;}const jsonData=(cov_11c5mfj1kr().s[5]++,other.getTrashData());// This is assuming that the invoices are appended to the end of the JSON array as
// they get deleted so that the invoices array can be returned in the correct order
let invoices=(cov_11c5mfj1kr().s[6]++,jsonData.filter(invoice=>{cov_11c5mfj1kr().f[1]++;cov_11c5mfj1kr().s[7]++;return invoice.owner===tokenValidation.username;}));cov_11c5mfj1kr().s[8]++;if(invoices.length()===0){cov_11c5mfj1kr().b[1][0]++;cov_11c5mfj1kr().s[9]++;return{code:200,ret:{success:true,invoices:[]}};}else{cov_11c5mfj1kr().b[1][1]++;}cov_11c5mfj1kr().s[10]++;return{code:200,ret:{success:true,invoices:invoices}};cov_11c5mfj1kr().s[11]++;invoices=invoices.map(obj=>{cov_11c5mfj1kr().f[2]++;// Remove owner from the array
const{owner,...rest}=(cov_11c5mfj1kr().s[12]++,obj);cov_11c5mfj1kr().s[13]++;other.foo(owner);cov_11c5mfj1kr().s[14]++;return rest;});cov_11c5mfj1kr().s[15]++;return{code:200,ret:{success:true,invoices:invoices}};}cov_11c5mfj1kr().s[16]++;module.exports={listTrashItems};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTFjNW1majFrciIsImFjdHVhbENvdmVyYWdlIiwib3RoZXIiLCJzIiwicmVxdWlyZSIsImF1dGgiLCJsaXN0VHJhc2hJdGVtcyIsInRva2VuIiwiZiIsInRva2VuVmFsaWRhdGlvbiIsInRva2VuSXNWYWxpZCIsInZhbGlkIiwiYiIsImNvZGUiLCJyZXQiLCJzdWNjZXNzIiwiZXJyb3IiLCJqc29uRGF0YSIsImdldFRyYXNoRGF0YSIsImludm9pY2VzIiwiZmlsdGVyIiwiaW52b2ljZSIsIm93bmVyIiwidXNlcm5hbWUiLCJsZW5ndGgiLCJtYXAiLCJvYmoiLCJyZXN0IiwiZm9vIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInRyYXNoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG90aGVyID0gcmVxdWlyZShcIi4vb3RoZXIuanNcIik7XHJcbmNvbnN0IGF1dGggPSByZXF1aXJlKFwiLi9hdXRoLmpzXCIpO1xyXG5cclxuZnVuY3Rpb24gbGlzdFRyYXNoSXRlbXModG9rZW4pIHtcclxuICAgIGNvbnN0IHRva2VuVmFsaWRhdGlvbiA9IGF1dGgudG9rZW5Jc1ZhbGlkKHRva2VuKTtcclxuICAgIGlmICghdG9rZW5WYWxpZGF0aW9uLnZhbGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY29kZTogNDAxLFxyXG4gICAgICAgICAgICByZXQ6IHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IFwiVG9rZW4gaXMgZW1wdHkgb3IgaW52YWxpZFwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGpzb25EYXRhID0gb3RoZXIuZ2V0VHJhc2hEYXRhKCk7XHJcblxyXG4gICAgLy8gVGhpcyBpcyBhc3N1bWluZyB0aGF0IHRoZSBpbnZvaWNlcyBhcmUgYXBwZW5kZWQgdG8gdGhlIGVuZCBvZiB0aGUgSlNPTiBhcnJheSBhc1xyXG4gICAgLy8gdGhleSBnZXQgZGVsZXRlZCBzbyB0aGF0IHRoZSBpbnZvaWNlcyBhcnJheSBjYW4gYmUgcmV0dXJuZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXJcclxuICAgIGxldCBpbnZvaWNlcyA9IGpzb25EYXRhLmZpbHRlcihpbnZvaWNlID0+IGludm9pY2Uub3duZXIgPT09IHRva2VuVmFsaWRhdGlvbi51c2VybmFtZSk7XHJcblxyXG4gICAgaWYgKGludm9pY2VzLmxlbmd0aCgpID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY29kZTogMjAwLFxyXG4gICAgICAgICAgICByZXQ6IHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpbnZvaWNlczogW11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBjb2RlOiAyMDAsXHJcbiAgICAgICAgcmV0OiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGludm9pY2VzOiBpbnZvaWNlc1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGludm9pY2VzID0gaW52b2ljZXMubWFwKG9iaiA9PiB7XHJcbiAgICAgICAgLy8gUmVtb3ZlIG93bmVyIGZyb20gdGhlIGFycmF5XHJcbiAgICAgICAgY29uc3QgeyBvd25lciwgLi4ucmVzdCB9ID0gb2JqO1xyXG4gICAgICAgIG90aGVyLmZvbyhvd25lcik7XHJcbiAgICAgICAgcmV0dXJuIHJlc3Q7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgICByZXQ6IHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgaW52b2ljZXM6IGludm9pY2VzXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7IGxpc3RUcmFzaEl0ZW1zIH07XHJcbiJdLCJtYXBwaW5ncyI6IisvRUFlWTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FmWixLQUFNLENBQUFFLEtBQUssRUFBQUYsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxZQUFZLENBQUMsRUFDbkMsS0FBTSxDQUFBQyxJQUFJLEVBQUFMLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDLEVBRWpDLFFBQVMsQ0FBQUUsY0FBY0EsQ0FBQ0MsS0FBSyxDQUFFLENBQUFQLGNBQUEsR0FBQVEsQ0FBQSxNQUMzQixLQUFNLENBQUFDLGVBQWUsRUFBQVQsY0FBQSxHQUFBRyxDQUFBLE1BQUdFLElBQUksQ0FBQ0ssWUFBWSxDQUFDSCxLQUFLLENBQUMsRUFBQ1AsY0FBQSxHQUFBRyxDQUFBLE1BQ2pELEdBQUksQ0FBQ00sZUFBZSxDQUFDRSxLQUFLLENBQUUsQ0FBQVgsY0FBQSxHQUFBWSxDQUFBLFNBQUFaLGNBQUEsR0FBQUcsQ0FBQSxNQUN4QixNQUFPLENBQ0hVLElBQUksQ0FBRSxHQUFHLENBQ1RDLEdBQUcsQ0FBRSxDQUNEQyxPQUFPLENBQUUsS0FBSyxDQUNkQyxLQUFLLENBQUUsMkJBQ1gsQ0FDSixDQUFDLENBQ0wsQ0FBQyxLQUFBaEIsY0FBQSxHQUFBWSxDQUFBLFVBRUQsS0FBTSxDQUFBSyxRQUFRLEVBQUFqQixjQUFBLEdBQUFHLENBQUEsTUFBR0QsS0FBSyxDQUFDZ0IsWUFBWSxDQUFDLENBQUMsRUFFckM7QUFDQTtBQUNBLEdBQUksQ0FBQUMsUUFBUSxFQUFBbkIsY0FBQSxHQUFBRyxDQUFBLE1BQUdjLFFBQVEsQ0FBQ0csTUFBTSxDQUFDQyxPQUFPLEVBQUksQ0FBQXJCLGNBQUEsR0FBQVEsQ0FBQSxNQUFBUixjQUFBLEdBQUFHLENBQUEsYUFBQWtCLE9BQU8sQ0FBQ0MsS0FBSyxHQUFLYixlQUFlLENBQUNjLFFBQVEsQ0FBRCxDQUFDLENBQUMsRUFBQ3ZCLGNBQUEsR0FBQUcsQ0FBQSxNQUV0RixHQUFJZ0IsUUFBUSxDQUFDSyxNQUFNLENBQUMsQ0FBQyxHQUFLLENBQUMsQ0FBRSxDQUFBeEIsY0FBQSxHQUFBWSxDQUFBLFNBQUFaLGNBQUEsR0FBQUcsQ0FBQSxNQUN6QixNQUFPLENBQ0hVLElBQUksQ0FBRSxHQUFHLENBQ1RDLEdBQUcsQ0FBRSxDQUNEQyxPQUFPLENBQUUsSUFBSSxDQUNiSSxRQUFRLENBQUUsRUFDZCxDQUNKLENBQUMsQ0FDTCxDQUFDLEtBQUFuQixjQUFBLEdBQUFZLENBQUEsVUFBQVosY0FBQSxHQUFBRyxDQUFBLE9BRUQsTUFBTyxDQUNIVSxJQUFJLENBQUUsR0FBRyxDQUNUQyxHQUFHLENBQUUsQ0FDREMsT0FBTyxDQUFFLElBQUksQ0FDYkksUUFBUSxDQUFFQSxRQUNkLENBQ0osQ0FBQyxDQUFDbkIsY0FBQSxHQUFBRyxDQUFBLE9BRUZnQixRQUFRLENBQUdBLFFBQVEsQ0FBQ00sR0FBRyxDQUFDQyxHQUFHLEVBQUksQ0FBQTFCLGNBQUEsR0FBQVEsQ0FBQSxNQUMzQjtBQUNBLEtBQU0sQ0FBRWMsS0FBSyxDQUFFLEdBQUdLLElBQUssQ0FBQyxFQUFBM0IsY0FBQSxHQUFBRyxDQUFBLE9BQUd1QixHQUFHLEVBQUMxQixjQUFBLEdBQUFHLENBQUEsT0FDL0JELEtBQUssQ0FBQzBCLEdBQUcsQ0FBQ04sS0FBSyxDQUFDLENBQUN0QixjQUFBLEdBQUFHLENBQUEsT0FDakIsTUFBTyxDQUFBd0IsSUFBSSxDQUNmLENBQUMsQ0FBQyxDQUFDM0IsY0FBQSxHQUFBRyxDQUFBLE9BRUgsTUFBTyxDQUNIVSxJQUFJLENBQUUsR0FBRyxDQUNUQyxHQUFHLENBQUUsQ0FDREMsT0FBTyxDQUFFLElBQUksQ0FDYkksUUFBUSxDQUFFQSxRQUNkLENBQ0osQ0FBQyxDQUNMLENBQUNuQixjQUFBLEdBQUFHLENBQUEsT0FFRDBCLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHLENBQUV4QixjQUFlLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=